{"version":3,"sources":["../src/tabledata.js"],"names":["define","$","ajax","Templates","notification","init","click","selecteddate","text","url","M","cfg","wwwroot","window","open","mailTemp","on","focusout","txt","value","replace","toLowerCase","appendTo","class","keyup","ev","test","which","remove","location","href","e","trim","html","length","preventDefault","alert","emailIds","map","get","checkedArray","checkboxes","document","querySelectorAll","i","push","promises","call","methodname","args","attach","JSON","stringify","subject","val","message","users","done","result","console","log","fail"],"mappings":"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","sourcesContent":["define([\"jquery\", \"core/ajax\", \"core/templates\", \"core/notification\"], function($, ajax, Templates, notification) {\n    return {\n        init: function() {\n            $('#exportButton').click(function() {\n                var selecteddate = $('#dated').text();\n                var url = M.cfg.wwwroot + '/report/trainingenrolment/downloadpdf.php?d='+selecteddate;\n                window.open(url,'_self' );\n            });\n        },\n        mailTemp: function() {\n            $(\"#add-tag-input\").on({\n                focusout : function() {\n                    var txt = this.value.replace(/[^a-z0-9-@&\\+\\-\\.\\#]/ig,''); // allowed characters\n                    if (txt) {\n                        $(\"<span/>\", {text:txt.toLowerCase(), appendTo:\"#tag-container\", class:\"dashfolio-tag\"});\n                    }\n                    this.value = \"\";\n                },\n                keyup : function(ev) {\n                    // if: comma|enter (delimit more keyCodes with | pipe)\n                    if (/(188|13)/.test(ev.which)) {\n                        $(this).focusout();\n                    }\n                }\n            });\n\n            $('.tag-container').on('click', 'span', function() {\n                    //if(confirm(\"Remove \"+ $(this).text() +\"?\"))\n                    $(this).remove();\n            });\n\n            $('#cancelBtn').click(function() {\n                window.location.href = '{{{ main_url }}}';\n                return false;\n            });\n\n            $('#submitBtn').click(function(e) {\n                if( !$.trim( $('#tag-container').html() ).length ) {\n                    e.preventDefault();\n                    notification.alert('Notice', 'You must enter at least one email id!', 'Continue');\n                    return;\n                } else {\n                    e.preventDefault();\n                    var emailIds = $('.dashfolio-tag').map(function() {\n                        return $(this).text();\n                    }).get();\n\n                    var checkedArray = [];\n                    var checkboxes = document.querySelectorAll('input[name=\"inlineCheckbox[]\"]:checked');\n                    for (var i = 0; i < checkboxes.length; i++) {\n                        checkedArray.push(checkboxes[i].value);\n                    }\n                    var promises = ajax.call([\n                        {\n                            methodname: 'report_te_mail_users',\n                            args: {\n                                attach : JSON.stringify(checkedArray),\n                                subject : $('#subject').val(),\n                                message : $('#message').val(),\n                                users : JSON.stringify(emailIds)\n                            }\n                        }\n                    ]);\n                    promises[0].done(function(result) {\n                        window.console.log(result);\n                        notification.alert('Success', 'Users Processed Successfully!', 'Continue');\n                    }).fail(function(result) {\n                        window.console.log(result);\n                        notification.alert('Warning', 'Failed Processing Users!', 'Continue');\n                    });\n                }\n            });\n        }\n    };\n});\n"],"file":"tabledata.min.js"}